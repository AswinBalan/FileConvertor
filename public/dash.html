<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>

        <nav class="navbar navbar-expand-lg bg-primary navbar-light sticky-top">
                <a class="navbar-brand ml-2" href="#">
                        <img src="man (1).png" class="float-right" alt="logo" style="width:40px;">
                </a>
                <ul class="navbar-nav">
                  <li class="nav-item px-4 font-italic dropdown " style="color:white;">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Sai Vishnu R</a>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item">DashBoard</a>
                        <a href="#" class="dropdown-item">Settings</a>
                        <a href="#" class="dropdown-item">Logout</a>
                    </div>
                  </li>
                  <li class="nav-item px-2 font-italic font-weight-bolder">
                    <a class="nav-link" style="color:white;" href="#">Files Converted</a>
                  </li>
                  <li class="nav-item px-2 font-italic font-weight-bolder">
                    <a class="nav-link" style="color:white;" href="#">Home</a>
                  </li>
                </ul>
        </nav>

        <!-- SubTitile -->
        <div class="card text-center">
                <div class="card-body">
                  <h4 class="card-title font-italic ">A SIMPLE IMAGE CONVERTER PORTAL</h4>
                  <h6 class="card-subtitle text-muted font-weight-bold font-italic">Conversion in Seconds!!!</h6>
                </div>
        </div>
        <!-- File upload -->
        <form id="fm" method="POST" action="/upload" enctype="multipart/form-data">
                  <div class="container mt-5">
                          <div class="custom-file mb-3">
                                  <input name="myimage" type="file" class="custom-file-input" id="customFile">
                                  <label name="my-label" class="custom-file-label" id="file-name" for="customFile" >Click Here to choose file!</label>
                          </div>
                  </div>

        <!-- Target File Format -->
                  <div class="form-group container mt-5">
                          <label name="drop" for="select">Choose the target file format</label>
                          <select name="select" class="custom-select" id="select">
                              <option name="op1" selected>JPG</option>
                              <option name="op2" value="png">PNG</option>
                              <option name="op3" value="gif">GIF</option>
                              <option name="op4" value="bmp">BMP</option>
                              <option name="op5" value="webp">WEBP</option>
                              <option name="op6" value="tiff">TIFF</option>
                              <option name="op6" value="ico">ICO</option>


                          </select>
                  </div>
                  <!-- Upload Button -->
                      <div class="ml-5 float-left" style="margin-top:7%; margin-left:10%;">
                          <button name="mybtn" id="mybtn"  class= "btn btn-outline-success"  href="#img" type="submit">Upload</button>
                              <!-- Uploading Gif -->
                              <!-- <div id="img" class="text-center mt-n5 collapse">
                                      <img name="down-img" id="imgloc" class="image-fluid"  src="train2.gif" style="margin-top:-1.5%;margin-left:40%; max-width:100%; width: auto; height:auto;">
                              </div> -->
                      </div>
          </form>
                  <div class="container" style="margin-top: 10%;">
                      <div class="text-center">
                        <!-- check status button -->
                        <button  id="state" class="btn btn-outline-primary mt-n5" onclick=jobStatus() href="#" role="button">Check Staus</button>
                        <div id="i" class="text-center">
                        <img id="i-loc" class="image-fluid" src=" "/>
                        </div>
                      </div>
                      <!-- Download Button -->
                      <div class="text-center float-right" style="margin-top:-7%;">
                          <button id="dn" class="btn btn-outline-primary" onclick="downLoad()" href="#" role="button" disabled>Download</button>
                          <a id="insert" href="#" download></a>
                      </div>
                  </div>
                  
        <i class="fixed-bottom mb-1 fa fa-copyright text-center" >@ 2019 Copyright: All rights reserved</i>

        <script>
/*          function init()
          {
            console.log("its above here");
            setTimeout(function(){
              console.log("its here");
            document.getElementById("state").disabled = false;
            },5000);
            console.log("its below here");
          }
*/

          function jobStatus()
          {
            
          console.log("dsfs");
            
            var xhr = new XMLHttpRequest();
            xhr.open("GET",'http://192.168.43.36:5500/jobStatus');

            xhr.onreadystatechange = function() {
              if(xhr.readyState == 4) {
                document.getElementById("i-loc").src = "checked.png";
                document.getElementById("dn").disabled = false;
               console.log(xhr.responseText);
              }
          }
          xhr.send();
          }

          function downLoad()
          {
            var xhr = new XMLHttpRequest();
           // xhr.setRequestHeader('Accept','image/png');
            xhr.open("GET",'http://192.168.43.36:5500/download');
        
            xhr.onreadystatechange = function() {
              if(xhr.readyState == 4 ) {
                document.getElementById("insert").href = xhr.responseText;
                document.getElementById("insert").click();
                document.getElementById("dn").disabled = true;
              }
          }
          xhr.send();
          }

        </script>

        
</body>
</html>



<!-- <div class="card-deck">
    <div class="card">
        <img class="card-img-top" src="../static/page.jpg" alt="Avatar">
        <div class="card-body">
            <h4 class="card-title font-italic">Desktop</h4>
            <p class="card-text">You can also use other input classes, such as .input-group-prepend or .input-group-append to attach an icon or help text next to the input field. 
                You will learn more about these classes in the Bootstrap Inputs chapter.</p>
        </div>
    </div>
    <div class="card">
        <img class="card-img-top" src="../uploads/myimage1563697368635emmanew.jpg" alt="Avatar">
        <div class="card-body">
            <h4 class="card-title font-italic">Emma Watson</h4>
            <p class="card-text">You can also use other input classes, such as .input-group-prepend or .input-group-append to attach an icon or help text next to the input field.
            You will learn more about these classes in the Bootstrap Inputs chapter.</p>
        </div>
    </div>
</div> -->